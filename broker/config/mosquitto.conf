persistence true
persistence_location /mosquitto/data/
# — GARANTIR la mise en file des QoS1/2 quand le client est hors-ligne —
# Nombre max de messages QoS1/2 en attente par client (hors inflight).
# Mets une valeur haute et/ou une limite en octets.
max_queued_messages 10000
max_queued_bytes 1310720

# Expiration des sessions persistantes inactives (évite de stocker à vie)
persistent_client_expiration 3d

log_type all
log_type debug
log_dest stdout
log_timestamp_format %Y-%m-%dT%H:%M:%S
websockets_log_level 0
connection_messages true


listener 8081 0.0.0.0
protocol websockets
allow_anonymous false
acl_file /mosquitto/data/acl_file
password_file /mosquitto/data/passwd_file
